<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MQTT Client Simulation</title>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <script>
      const options = {
        // Clean session
        clean: true,
        connectTimeout: 4000,
        reconnectPeriod: 0, // Disable automatic reconnection
        // Auth
        clientId: "frontend_test",
        username: "streamsheets",
        password: "vVIGFFZBne",
      };
      const client = mqtt.connect("ws://localhost:9001", options);
      client.on("connect", function () {
        console.log("Connected");
        client.subscribe("cedalo/operator-hmi/machine", function (err) {
          if (!err) {
            console.log("Subscribed!");
          }
        });
      });

      client.on("message", function (topic, message) {
        // message is Buffer
        console.log(message.toString());
        // client.end();
      });
    </script>
  </head>
  <body></body>
</html>
